<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DOB Magic Square</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #e0f2fe, #f0f9ff);
      color: #111;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
    }
    .app {
      width: 420px;
      background: #fff;
      border-radius: 16px;
      padding: 28px 24px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      animation: fadeIn 0.6s ease;
    }
    h1 {
      text-align: center;
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 20px;
      color: #1e3a8a;
    }
    label {
      font-size: 14px;
      font-weight: 500;
      display: block;
      margin-bottom: 6px;
      color: #374151;
    }
    input[type=date] {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 16px;
      border: 1px solid #cbd5e1;
      border-radius: 6px;
      font-size: 14px;
      transition: border 0.3s, box-shadow 0.3s;
    }
    input[type=date]:focus {
      border-color: #2563eb;
      outline: none;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.2);
    }
    button {
      background: linear-gradient(135deg, #2563eb, #1e40af);
      border: none;
      padding: 12px 16px;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      font-size: 15px;
      font-weight: 500;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      width: 100%;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 14px rgba(37, 99, 235, 0.25);
    }
    .matrix {
      display: grid;
      grid-template-columns: repeat(4,1fr);
      gap: 10px;
      margin-top: 20px;
    }
    .cell {
      background: #f8fafc;
      padding: 14px 0;
      text-align: center;
      border-radius: 8px;
      font-weight: 600;
      font-size: 16px;
      color: #1e293b;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.06);
      transition: background 0.3s;
    }
    .cell:hover {
      background: #e0f2fe;
    }
    .meta {
      text-align: center;
      margin-top: 14px;
      font-size: 15px;
      color: #475569;
    }
    .meta strong {
      color: #2563eb;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>✨ DOB Magic Square ✨</h1>
    <label for="dob">Select Date of Birth:</label>
    <input id="dob" type="date" value="1992-08-14" />
    <button id="make">Generate Magic Square</button>
    <div class="matrix" id="matrix"></div>
    <div class="meta">Magic constant: <strong id="magic">—</strong></div>
  </div>

<script>
  const dobEl = document.getElementById('dob');
  const makeBtn = document.getElementById('make');
  const matrixEl = document.getElementById('matrix');
  const magicEl = document.getElementById('magic');

  function splitYear(y){
    const yy1 = Math.floor(y/100);
    const yy2 = y % 100;
    return [yy1, yy2];
  }

  function generateFromDate(dateStr){
    if(!dateStr) return null;
    const d = new Date(dateStr);
    if(Number.isNaN(d.getTime())) return null;
    const DD = d.getDate();
    const MM = d.getMonth()+1;
    const YYYY = d.getFullYear();
    const [YY1, YY2] = splitYear(YYYY);

    const r1 = [DD, MM, YY1, YY2];
    const r2 = [YY2 + 1, YY1 - 1, MM - 3, DD + 3];
    const r3 = [MM - 2, DD + 2, YY2 + 2, YY1 - 2];
    const r4 = [YY1 + 1, YY2 - 1, DD + 1, MM - 1];
    const grid = [ ...r1, ...r2, ...r3, ...r4 ];
    return grid;
  }

  function render(grid){
    matrixEl.innerHTML = '';
    grid.forEach(v=>{
      const div = document.createElement('div');
      div.className = 'cell';
      div.textContent = v;
      matrixEl.appendChild(div);
    });

    const rows = [];
    for(let r=0;r<4;r++) rows.push(grid.slice(r*4,(r+1)*4).reduce((a,b)=>a+b,0));
    magicEl.textContent = rows[0];
  }

  makeBtn.addEventListener('click', ()=>{
    const grid = generateFromDate(dobEl.value);
    if(!grid){ alert('Please pick a valid date'); return; }
    render(grid);
  });
</script>
</body>
</html>

